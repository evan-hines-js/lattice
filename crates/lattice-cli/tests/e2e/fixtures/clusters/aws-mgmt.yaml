# AWS management cluster for E2E testing
# Uses CAPA (Cluster API Provider AWS) with NLB
apiVersion: lattice.dev/v1alpha1
kind: LatticeCluster
metadata:
  name: e2e-mgmt
spec:
  provider:
    kubernetes:
      version: "1.32.0"
      bootstrap: kubeadm
      certSANs:
        - "127.0.0.1"
        - "localhost"
    config:
      aws:
        region: "us-west-2"
        cpInstanceType: "m5.xlarge"
        workerInstanceType: "m5.large"
        sshKeyName: "lattice-e2e"
        cpRootVolumeSizeGb: 50
        cpRootVolumeType: "gp3"
        workerRootVolumeSizeGb: 50
        workerRootVolumeType: "gp3"
  nodes:
    controlPlane: 1
    workers: 1
  parentConfig:
    # host is auto-discovered from NLB
    grpcPort: 50051
    bootstrapPort: 8443
    service:
      type: LoadBalancer
